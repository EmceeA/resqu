@using Resq.Web.ViewModels
@{
    ViewData["Title"] = "Services";
    Layout = "~/Views/Shared/_LayoutServices.cshtml";
}


<!-- PAGE CONTAINER-->
<!-- MAIN CONTENT-->
<div class="main-content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12 mt-4">
                <h4>Services</h4>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-lg-12">
                <div class="bg-white add-service-div p-4">
                    <div class="row align-items-center justify-content-between">
                        <div class="col-lg-3 col-xl-2">
                            <a href="../../BackOffice/AddService" target="_blank" class="btn btn-addNewVendor d-flex justify-content-between align-items-center">
                                <p class="px-2 col-lg-4 col-md-6">Add new <br />service</p>
                                <div>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
                                        <g id="Group_4794" data-name="Group 4794" transform="translate(-217 -163)">
                                            <circle id="Ellipse_376" data-name="Ellipse 376" cx="24" cy="24" r="24" transform="translate(217 163)"
                                                    fill="#5fb47d" />
                                            <text id="_" data-name="+" transform="translate(232 199)" fill="#fff" font-size="35"
                                                  font-family="Effra-Regular, Effra">
                                                <tspan x="0" y="0">+</tspan>
                                            </text>
                                        </g>
                                    </svg>
                                </div>
                            </a>
                        </div>
                        <div class="col-lg-3">
                            <h4 class="text-center">TOTAL: @ViewBag.ServiceCount  Services</h4>
                        </div>
                        <div class="col-lg-6 col-xl-5">
                            @*<div class="row">
                                    <div class="col-lg-8">
                                        <input type="text" class="input-field-search">
                                    </div>
                                    <div class="col-lg-4">
                                        <button class="btn btn-search">Search</button>
                                    </div>
                                </div>*@
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-lg-12">
                <div class="bg-white add-service-div py-5 px-4 mb-5" style="height:73vh">
                    <div class="row d-grid" style="grid-row-gap: 30px;">
                        @foreach (Service services in ViewBag.Services)
                        {
                            <div class="col-lg-3">
                                <a href="#" class="service-card p-4" data-toggle="modal" data-target="#serviceModal" id="serviceModal">
                                    <p id="serviceCater">@services.ServiceId</p>
                                    <h5 class="text-center">@services.ServiceType</h5>
                                    <p class="sub-category-p font-sm3 text-center">@services.SubCategory Sub-Categories</p>
                                </a>
                            </div>

                        }
                        @*<script src="~/dashboard/assets/vendor/jquery-3.2.1.min.js"></script>
                            <script type="text/javascript">
                                $(document).ready(function () {
                                    $('#html2').html('');
                                        $("#serviceModal").click(function () {
                                            console.log("service", $("#serviceCater").text())
                                            $.ajax({
                                                type: "GET",
                                                url: "https://localhost:44309/api/BackOffice/GetDetailsById?id=" + $("#serviceCater").text(),
                                                dataType: "json",
                                                success: function (data) {
                                                    debugger;
                                                    var serviceCat = data.serviceCategory;
                                                    var briefDescription = data.description;
                                                    var dateCreated = data.dateCreated;
                                                    var createdBy = data.createdBy;
                                                    var subCategories = data.subCategories;
                                                    var strBlocksHTML = '';
                                                    $("#serviceName").text(serviceCat);
                                                    $("#breifDescription").text(briefDescription);
                                                    $("#dateCreated").text(dateCreated);
                                                    $("#createdBy").text(createdBy);
                                                    $("#subCategories").text(subCategories);

                                                    for (var i = 0; i < data.subCategoryList.length; i++) {
                                                        strBlocksHTML += data.subCategoryList[i];
                                                    }
                                                    strBlocksHTML += '<div></div>';
                                                    $("#serviceModaltwo").modal('show');
                                                    $('#html2').append(strBlocksHTML);
                                                    console.log(data);
                                                },
                                                error: function (req, status, error) {
                                                    console.log(msg);
                                                }
                                            });
                                        });
                                        });
                            </script>*@
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@*<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.9/jquery-ui.js" type="text/javascript"></script>
<link href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.9/themes/blitzer/jquery-ui.css"
      rel="stylesheet" type="text/css" />
<script type="text/javascript">
    $(function () {
        $("#dialog").dialog({
            autoOpen: false,
            modal: true,
            title: "View Details"
        });
        $("#CustomerGrid .details").click(function () {
            var customerId = $(this).closest("tr").find("td").eq(0).html();
            $.ajax({
                type: "POST",
                url: "/Home/Details",
                data: '{customerId: "' + customerId + '" }',
                contentType: "application/json; charset=utf-8",
                dataType: "html",
                success: function (response) {
                    $('#dialog').html(response);
                    $('#dialog').dialog('open');
                },
                failure: function (response) {
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }
            });
        });
    });
</script>*@
<!-- END MAIN CONTENT-->
<!-- END PAGE CONTAINER-->
@*</div>
    <div class="modal fade" tabindex="-1" role="dialog" id="serviceModaltwo">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body" id="modal_body">
                    <div class="table-responsive">
                        <table class="table table-services font-sm3 w-500">
                            <thead>
                            </thead>
                            <tbody>

                                <tr>
                                    <th class="no-border-top">Name of Service:</th>
                                    <td class="no-border-top" id="serviceName"></td>
                                </tr>
                                <tr>
                                    <th>Brief Description:</th>
                                    <td id="breifDescription">

                                    </td>
                                </tr>
                                <tr>
                                    <th>Date Created:</th>
                                    <td id="dateCreated"></td>
                                </tr>
                                <tr>
                                    <th>Created By:</th>
                                    <td id="createdBy"></td>
                                </tr>
                                <tr>
                                    <th>Sub-categories</th>
                                    <td id="subCategories"></td>
                                </tr>
                                <tr>
                                    <th>List of Sub-categories</th>
                                    <td>
                                        <div id="categories"></div>
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                    </div>
                    <div class="row mt-4 justify-content-center">
                        <div class="col-lg-7">
                            <div class="row">
                                <div class="col-lg-6">
                                    <button class="btn btn-update">Update</button>
                                </div>
                                <div class="col-lg-6">
                                    <a class="btn btn-close" data-dismiss="modal">Close</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>




        </div>*@

@*<div>
        <p>Services</p>
        <br />
        @foreach (Service services in ViewBag.Services)
        {
            <div>
                <p>Service Type: @services.ServiceType</p>
                <p>SubCategory : @services.SubCategory</p>
            </div>
        }
    </div>*@
